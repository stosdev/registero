{% extends "secondary_base.html" %}

{% load bootstrap3 %}
{% load i18n %}

{% block content %}
<h2 class="text-center">{% trans "General information" %}</h2>
<form action="." method="post" class="form">
  {% csrf_token %}
  {% bootstrap_form form %}
  {% buttons %}
  <button type="submit" class="btn btn-primary"><i class="fa fa-save"></i> {% trans "Save" %}</button>
  {% endbuttons %}
</form>

<h2 class="text-center">{% trans "Teams" %}</h2>
<p>{% trans "The final contest team list will be filled by choosing teams from each institutes team list. The order in which you provide the teams matters. After you create your teams please drag-and-drop them into an order based on their importance." %}</p>
{% for team in team_list %}
<div>
  <p>{% trans "Team" %} {{ team.order }}</p>
  <ul>
    {% for participant in team.participants.all %}
    <li>{{ participant.first_name }} {{ participant.last_name }}</li>
    {% empty %}
    <li>{% trans "No participants in this team yet." %}</li>
    {% endfor %}
  </ul>
</div>
{% empty %}
<h3 class="text-center">{% trans "No teams to show, you can add teams using the button below." %}</h3>
{% endfor %}
<a href="{% url "team.views.create" %}" class="btn btn-primary btn-block"><i class="fa fa-plus"></i> {% trans "Add new team" %}</a>
{% endblock %}

{% block scripts %}
<script>
  $(document).ready(function(){
    var checked = $('#id_accomodation_required').is(':checked');
    if (!checked) {
      $('#id_institute_address').parent().hide();
      $('#id_institute_nip').parent().hide();
    }
    $('#id_accomodation_required').change(function(){
      $('#id_institute_address').parent().toggle();
      $('#id_institute_nip').parent().toggle();
    });
  });
</script>
{% endblock %}
